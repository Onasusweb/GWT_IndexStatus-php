{"name":"Gwt indexstatus-php","tagline":"Request website indexing status data from your Google Webmaster Tools account.","body":"# GWT_IndexStatus: Request Index Status data from Google Webmaster Tools.\r\n\r\n## Introduction\r\n\r\nSince Googlebot was born, webmasters around the world have been asking one question: Google, oh, Google, are my pages in the index? In July 2012 Google answered that question with a new feature in Webmaster Tools called 'Index Status'. Further information can be found here: http://googlewebmastercentral.blogspot.de/2012/07/behold-google-index-secrets-revealed.html.\r\n\r\nThis PHP class lets you request that information script-wise and returns the 'Index Status'-data in JSON format.  \r\nThe package also includes <a href=\"https://github.com/eyecatchup/GWT_IndexStatus-php#example-3---save-data-as-csv\">an example</a> how to automatically download the data into CSV files.\r\n\r\n## Download\r\n\r\nThe latest stable version can be downloaded from the downloads tab, or using the following link:  \r\nhttps://github.com/downloads/eyecatchup/GWT_IndexStatus-php/GWT_IndexStatus-php-1.0.0.zip\r\n\r\n## Usage - Get Started\r\n\r\nTo get started, the steps are as follows:\r\n\r\n - Download the Zip file (<a href=\"https://github.com/downloads/eyecatchup/GWT_IndexStatus-php/GWT_IndexStatus-php-1.0.0.zip\">click here</a>) and unzip it.\r\n - Create a folder and add the GWT_IndexStatus.php script from the extracted Zip to it.\r\n\r\n### Authentication\r\n\r\nTo request data from your Google Webmaster Tools Account you must authenticate requests using your Google Account login credentials. There are two ways to do so.\r\n\r\n#### Authentication via Interface\r\n\r\nThe easiest way is to set your login credentials using the class interface `GWT_Client`. To do so, open the GWT_IndexStatus.php file, go to line 53 and enter your login credentials.\r\n\r\n```php\r\n<?php\r\n\tinterface GWT_Client\r\n\t{\r\n\t\tconst Email = 'username@gmail.com';\r\n\t\tconst Passwd = 'secretpassword';\r\n\t}\r\n```\r\n\r\n#### (Explicit) Authentication via `login()`\r\n\r\nAlternatively, you can use the `login()` method to authenticate your requests. This is also handy if you want to request data for another account than defined in the interface. For an example, please see the php file example4.php.\r\n\r\nNOTE: The script will NOT work, if you have two-step-verification enabled. _(If you don't know what that is, just forget about this note. ;-))_\r\n\r\n## Usage - Examples\r\n\r\n### Example 1 - `getDataByDomain()`\r\n\r\nTo download index status data for a single domain, the steps are as follows:\r\n\r\n - In the same folder where you added the GWT\\_IndexStatus.php, create and run the following PHP script.<br>_Note: You'll need to authenticate your request (see above)! Also, you'll need to replace the example URL with a domain that is registered in your GWT account._\r\n\r\n```php\r\n<?php\r\nrequire_once('GWT_IndexStatus.php');\r\n\r\ntry {\r\n  $indx = new GWT_IndexStatus();\r\n\r\n  $json = $indx->getDataByDomain('http://www.domain.tld/'); # NOTE: Must have a trailing slash!\r\n  print_r( json_decode($json) );\r\n}\r\ncatch (Exception $e) {\r\n  die( $e->getMessage() );\r\n}\r\n```\r\n\r\nBy default, the class will return totals of indexed pages, the cumulative number of pages crawled, the number of pages that Google knows about which are not crawled because they are blocked by robots.txt, and also the number of pages that were not selected for inclusion in Google's search results. However you can adjust the request parameters using the `setParam()` method (as done in the 2nd example).\r\n\r\n### Example 2 - `getDataAllDomains()`\r\n\r\nTo download index status data for all domains that are registered in your Webmaster Tools account, the steps are as follows:\r\n\r\n - In the same folder where you added the GWT\\_IndexStatus.php, create and run the following PHP script.<br>_Note: You'll need to authenticate your request (see above)!_\r\n\r\n```php\r\n<?php\r\nrequire_once('GWT_IndexStatus.php');\r\n\r\ntry {\r\n  $indx = new GWT_IndexStatus();\r\n  \r\n  /**\r\n   * Exclude 'blocked by robots.txt'-data.\r\n   * Valid parameters are 'is-crawl' (Ever crawled), 'is-indx' (Total indexed), \r\n   * 'is-rm' (Removed) and 'is-rbt' (Blocked by robots).\r\n   */\r\n  $indx->setParam('is-rbt', 0); \r\n\r\n  $json = $indx->getDataAllDomains();\r\n  print_r( json_decode($json) );\r\n}\r\ncatch (Exception $e) {\r\n  die( $e->getMessage() );\r\n}\r\n```\r\n\r\n### Example 3 - Save data as CSV\r\n\r\nTo download index status data for all domains that are registered in your Webmaster Tools account and save the resultsets into CSV files, the steps are as follows:\r\n\r\n - In the same folder where you added the GWT\\_IndexStatus.php, create and run the following PHP script.<br>_Note: You'll need to authenticate your request (see above)!_\r\n\r\n```php\r\n<?php\r\nrequire_once('GWT_IndexStatus.php');\r\n\r\ntry {\r\n  $indx = new GWT_IndexStatus();\r\n\r\n  $json = $indx->getDataAllDomains();\r\n  $domains = json_decode($json);\r\n\r\n  foreach ($domains as $domain) {\r\n    $data = $domain->indexData;\r\n    $colCount = sizeof($data->cols);\r\n\r\n    // Get column label names for CSV headline\r\n    $labels = Array();\r\n    for ($i=0; $i < $colCount; $i++) {\r\n        $labels[] = $data->cols[$i]->label;\r\n    }\r\n    $cols = implode(';', $labels);\r\n\r\n    // Start new CSV output string.\r\n    $csv = \"$cols\\n\";\r\n\r\n    // Iterate through all resultsets and add rows to CSV output string\r\n    // containing the columns as defined per instance.\r\n    foreach ($data->rows as $r) {\r\n      $row = Array();\r\n      for ($i=0; $i < $colCount; $i++) {\r\n          $row[] = $r->c[$i]->v;\r\n      }\r\n      $csv .= implode(';', $row) .\"\\n\";\r\n    }\r\n\r\n    // Write CSV string to file.\r\n    $filename = 'GWT_IndexStatus_' .\r\n      parse_url($domain->domain, PHP_URL_HOST) .'_'.\r\n      date(\"m-d-Y\") .'.csv';\r\n\r\n    if (file_put_contents($filename, $csv))\r\n      print \"Saved $filename\\n\";\r\n  }\r\n}\r\ncatch (Exception $e) {\r\n  die( $e->getMessage() );\r\n}\r\n```\r\n\r\nThis example code will create a CSV file for each domain that is reqistered in your GWT account in the same folder where you run the script.\r\n\r\n## Legal Note\r\n\r\nThe author of the software is not a partner, affiliate, or licensee of Google Inc. or its employees, nor is the software in any other way formally associated with or legitimized by Google Inc.. Google is a registered trademark of Google Inc.. Use of the trademark is subject to Google Permissions: http://www.google.com/permissions/index.html.\r\n\r\n## Copyright / License\r\n\r\nURL: https://github.com/eyecatchup/GWT_IndexStatus-php/      \r\nLicense: http://eyecatchup.mit-license.org/     \r\n(c) 2012, Stephan Schmitz <eyecatchup@gmail.com>  ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}